!function(){function t(t){if(t.target.value.length>2){let o=t.target.nextElementSibling;null!==o&&(o.style.opacity="0",setTimeout((()=>{o.remove()}),1e3))}}function o(){let o,e;if(o=document.getElementById("ruby_pipeline"),e=document.createDocumentFragment(),this.rubyFormContainer=document.createElement("div"),this.rubyFormContainer.className="ruby-form-wrapper",this.rubyFormContainer.style.minWidth=this.options.minWidth+"px",this.rubyFormContainer.style.maxWidth=this.options.maxWidth+"px",this.rubyForm=document.createElement("form"),this.rubyForm.className="ruby-form",this.rubyForm.setAttribute("autocomplete","off"),"object"==typeof this.formFields){let o=this.rubyForm;this.formFields.forEach((function(e,r){let i=document.createElement("div");i.className="ruby-form-group";let n=document.createElement("label");n.setAttribute("for",e.key),n.innerText=e.label;let s=document.createElement("input");"email"===e.key?s.setAttribute("type","email"):s.setAttribute("type","text"),s.setAttribute("name",e.key),s.setAttribute("id",e.key),s.setAttribute("class","ruby-form-input"),s.setAttribute("autocomplete","off"),s.setAttribute("placeholder","Enter your "+e.label),s.addEventListener("keyup",t.bind(this)),i.appendChild(n),i.appendChild(s),o.append(i)})),this.rubyForm=o,this.rubySubmitButton=document.createElement("button"),this.rubySubmitButton.className="ruby-form-submit",this.rubySubmitButton.id="rubySubmit",this.rubySubmitButton.setAttribute("type","button"),this.rubySubmitButton.innerText="Submit",this.rubyForm.append(this.rubySubmitButton)}this.rubyFormContainer.appendChild(this.rubyForm),e.appendChild(this.rubyFormContainer),o.appendChild(e)}function e(){let t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=".ruby-form-wrapper{position: relative; box-sizing: border-box; margin: 20px; padding: 50px 20px; border: 1px solid "+this.options.colors.formBorder+"; border-top: 3px solid "+this.options.colors.formTopBorder+";}.ruby-form-group label {display:inline-block; margin-bottom: .50rem; font-size: 1rem; color: "+this.options.colors.formFontColor+"}.ruby-form-group {display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:1rem;}.ruby-form-input {display:block;width:100%;padding:.595rem .75rem;font-size:1rem;line-height:1.2;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid "+this.options.colors.formBorder+"; border-radius:0 !important;-webkit-transition:border-color 0.15s ease-in-out,-webkit-box-shadow 0.15s ease-in-out;transition:border-color 0.15s ease-in-out;-webkit-box-shadow 0.15s ease-in-out;transition:border-color 0.15s ease-in-out,box-shadow 0.15s ease-in-out;transition:border-color 0.15s ease-in-out,box-shadow 0.15s ease-in-out,-webkit-box-shadow 0.15s ease-in-out;}.ruby-form-input::-ms-expand{background-color:transparent;border:0}.ruby-form-input:focus{color:#495057;background-color:#fff;border-color:"+this.options.colors.formBorderFocus+"; border-radius: 0;outline:0;-webkit-box-shadow:0 0 0 .2rem "+this.options.colors.formShadowFocus+"; box-shadow:0 0 0 .1rem "+this.options.colors.formShadowFocus+"} .ruby-form-input::-webkit-input-placeholder{color:#6c757d;opacity:0.7}.ruby-form-input:-ms-input-placeholder{color:#6c757d;opacity:0.7}.ruby-form-input::-ms-input-placeholder{color:#6c757d;opacity:0.7}.ruby-form-input::placeholder{color:#6c757d;opacity:.7}.ruby-form-submit {font-weight:900 !important;cursor: pointer;border:none;border-radius:1.5rem;padding: 0.89rem 2.8rem;margin: 0;display:block; width:100%; color:#fff; background-color: "+this.options.colors.formButtonBackground+";border-color: "+this.options.colors.formButtonBackground+" !important; overflow:visible; text-transform:none;-webkit-appearance:button; margin:0;font-family:inherit;font-size:18px;line-height:inherit}.ruby-form-submit:focus{outline:0;} .ruby-form-submit::-moz-focus-inner {padding:0;border-style:none, outline:0}.ruby-form-submit:hover {transition: all 0.5s ease-in;color:#fff;background-color: "+this.options.colors.formButtonHover+";border-color: "+this.options.colors.formButtonHover+" !important;}.ruby-form-danger {color: #ff7272; font-size:11px;padding-top:5px;opacity: 1;-webkit-transition: opacity 1000ms linear;transition: opacity 1000ms linear;}.ruby-form-success {color: #008000, font-weight: 700; margin-bottom: 20px; padding-bottom: 10px;}",document.head.appendChild(t)}function r(t,o){let e;for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);return t}function i(){this.rubySubmitButton&&this.rubySubmitButton.addEventListener("click",this.submit.bind(this))}this.RubyForm=function(){this.rubyForm=null,this.formValues=[],this.rubyFormContainer=null,this.rubySubmitButton=null,this.formFields=null,this.baseUrl="https://server.rubystack.io";let t={colors:{formTopBorder:"#298530",formBorder:"#ced4da",formBorderFocus:"#80bdff",formShadowFocus:"rgba(59,191,69,0.25)",formBackground:"transparent",formFontColor:"#495057",formButtonBackground:"#298530",formButtonHover:"#2C404C"},successMessage:"Thank you for getting in touch with us!",maxWidth:480,minWidth:300,key:""};arguments[0]&&"object"==typeof arguments[0]&&(this.options=r(t,arguments[0]))},RubyForm.prototype.init=function(){var t,r;r=this,"object"==typeof(t=this).options&&null!==t.options.key&&function(t,r){const n=new XMLHttpRequest;n.onload=function(){let t=JSON.parse(this.response);t.success&&function(t,r){r.formFields=t.result.parameters,o.call(r),e.call(r),i.call(r)}(t,r)},n.open("POST",r.baseUrl+"/api/external-integration/get-lead-form-parameters"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("key="+t.key)}(t.options,r)},RubyForm.prototype.submit=function(){let t=this;if(function(t,o){let e=!1;return o.formValues=[],document.querySelectorAll(".ruby-form-input").forEach((function(r,i){let n,s=r.value,u=t.find((t=>t.key===r.getAttribute("name")));if("email"===r.getAttribute("type")?function(t){return!!t.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)}(s)||(e=!0,n=" must be a valid address"):s.length<3&&(e=!0,n=" must be filled out"),e&&void 0===r.parentElement.children[2]){let t=document.createElement("span");t.className="ruby-form-danger",t.innerHTML=u.label+n,r.parentElement.append(t)}o.formValues.push({name:r.getAttribute("name"),value:s})})),!e}(t.formFields,t)){let o={values:t.formValues,key:t.options.key};const e=new XMLHttpRequest;e.onload=function(){if(JSON.parse(this.response).success){let o=document.createElement("span");o.className="ruby-form-success",o.style.color="#008000",o.style.fontWeight="700",o.style.marginBottom="30px",o.style.paddingBottom="50px",t.rubyFormContainer.style.paddingBottom="80px",o.innerHTML=t.options.successMessage,t.rubyForm.remove(),t.rubyFormContainer.appendChild(o)}},e.open("POST",t.baseUrl+"/api/external-integration/save-lead"),e.setRequestHeader("Content-type","application/json"),e.setRequestHeader("Accept","application/json"),e.send(JSON.stringify(o))}}}();